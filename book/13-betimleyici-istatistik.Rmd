# Betimleyici İstatistik 

https://statsandr.com/blog/descriptive-statistics-in-r/

https://rpubs.com/williamsurles/298945


## Veri Yükleme


- `PISA_STU_2018` veri setini kullanıyoruz. Bu veri seti R'de varsayılan olarak içe aktarılır, yalnızca PISA_STU_2018 çalıştırarak yüklemeniz gerekir:

```{r}
load("import/PISA_STU_2018.rda") # ogrenci verisi
head(PISA_STU_2018)
```
- Veri seti 6890 gözlem ve 1119 değişken içermektedir. 

- Grafiklerle ilgili olarak, varsayılan grafikleri ve iyi bilinen **ggplot2** paketinden grafikleri üzerinden işleyeceğiz.

- **ggplot2** paketindeki grafikler genellikle daha iyi bir görünüme sahiptir ancak daha gelişmiş kodlama becerileri gerektirir (daha fazla bilgi edinmek için "Graphics in R with ggplot2" makalesine bakın). 

- Grafiklerinizi yayınlamanız veya paylaşmanız gerekiyorsa, mümkünse **ggplot2** kullanmanızı öneririm, aksi takdirde varsayılan grafikler işinizi görecektir.

::: {.info data-latex=""}
İpucu: Yakın zamanda **esquisse** eklentilerinden ggplot2 oluşturucusunu keşfettim. Kendiniz kodlamak zorunda kalmadan **ggplot2** paketinden nasıl kolayca grafik çizebileceğinizi görün.
:::

- Bu sayfa görüntülenen tüm grafikler özelleştirilebilir. Örneğin, başlığı, x ve y ekseni etiketlerini, rengi vb. düzenlemek mümkündür. 

```{r}
library(ggplot2)
ggplot(PISA_STU_2018,aes(x=PV1READ)) + geom_histogram()
```

### Minimum and maximum

- `min()` ve `max()` fonksiyonları sayesinde minimum ve maksimum bulunabilir:

```{r}
min(PISA_STU_2018$PV1READ)
```


```{r}
max(PISA_STU_2018$PV1READ)
```

- Alternatif olarak `range()` fonksiyonu: size doğrudan minimum ve maksimum değerleri verir. `range()` fonksiyonunun çıktısının aslında minimum ve maksimum değerleri (bu sırayla) içeren bir nesne olduğuna dikkat edin. Bu, aslında minimuma şu şekilde erişebileceğiniz anlamına gelir:

```{r}
range(PISA_STU_2018$PV1READ)[1]
```

### Ortalama

Ortalama, `mean()` fonksiyonu ile hesaplanabilir:

```{r}
mean(PISA_STU_2018$PV1READ)
```

::: {.info data-latex=""}
İpuçları:

- Veri setinizde en az bir eksik değer varsa, ortalamayı NA hariç tutarak hesaplamak için `mean(PISA_STU_2018$PV1READ, na.rm = TRUE)` kullanın. Bu argüman sadece ortalama için değil, R'da sunulan çoğu fonksiyon için kullanılabilir.
- Kırpılmış  bir ortalama için `mean(PISA_STU_2018$PV1READ, trim = 0.10)` kullanın ve trim bağımsız değişkenini ihtiyaçlarınıza göre değiştirin.:::


### Medyan

- Medyan, `median()` fonksiyonu sayesinde hesaplanabilir:

```{r}
median(PISA_STU_2018$PV1READ)
```

- veya quantile() fonksiyonu ile:

```{r}
quantile(PISA_STU_2018$PV1READ, 0.5)
```

## I. ve III. Çeyrek

- Medyan gibi, birinci ve üçüncü çeyrekler de `quantile()` işlevi sayesinde ve ikinci bağımsız değişkenin 0.25 veya 0.75 olarak ayarlanmasıyla hesaplanabilir:

```{r}
quantile(PISA_STU_2018$PV1READ, 0.25) # birinci çeyrek
```

```{r}
quantile(PISA_STU_2018$PV1READ, 0.75) # ücüncü çeyrek
```

### Standart sapma ve varyans

- Standart sapma ve varyans `sd()` ve `var()` fonksiyonları ile hesaplanır:

```{r}
sd(PISA_STU_2018$PV1READ) # standard deviation
```

```{r}
var(PISA_STU_2018$PV1READ) # standard deviation
```

- İstatistik dersinden, standart sapma ve varyansın bir örneklem veya popülasyon için hesaplanmasının farklı olduğunu hatırlayın (örneklem ve popülasyon arasındaki farka bakın). R'de standart sapma ve varyans, veriler bir örneklem temsil ediyormuş gibi hesaplanır. 



::: {.info data-latex=""}
İpucu: Birden fazla değişkenin standart sapmasını (veya varyansını) aynı anda hesaplamak için, ikinci bağımsız değişken olarak uygun istatistiklerle birlikte lapply() fonksiyonu ile kullanın
:::

```{r}
library(dplyr)
PISA_STU_2018 %>% 
  select(starts_with("PV") & ends_with("READ")) %>%
  lapply(.,sd)
```

### Tüm özet istatistikler

```{r}
summary(PISA_STU_2018$PV1READ)
```

::: {.info data-latex=""}
İpucu: Bu tanımlayıcı istatistiklere gruba göre hesaplamak istiyorsanız `by()` fonksiyonunu kullanın:
:::


```{r}
by(PISA_STU_2018$PV1READ, PISA_STU_2018$IMMIG, summary)
```
```{r}
by(PISA_STU_2018$PV1READ, PISA_STU_2018$ST004D01T, summary)
```

- Burada bağımsız değişkenler veri setinin adı, gruplama değişkeni ve özet fonksiyonudur. Bu sırayı takip edin veya bu sırayı takip etmiyorsanız argümanların adını belirtin.

- Daha açıklayıcı istatistiklere ihtiyacınız varsa, **psych** paketindeki `stat.desc()` işlevini kullanın:

```{r message=FALSE, warning=FALSE}
library(psych)
describe(PISA_STU_2018 %>% 
  select(ESCS,JOYREAD))
```
### Değişkenlik katsayısı

- Değişkenlik katsayısı `stat.desc()` ile (yukarıdaki tabloda coef.var satırına bakın) veya manuel olarak hesaplanarak bulunabilir (Değişkenlik katsayısının standart sapmanın ortalamaya bölünmesi olduğunu unutmayın):

### Mod

- Bildiğim kadarıyla bir değişkenin modunu bulmak için bir fonksiyon yok. Ancak `table()` ve `sort()` fonksiyonları sayesinde bunu kolayca bulabiliriz:

```{r}
tab <- table(PISA_STU_2018$MISCED) # her benzersiz değer için oluşum sayısı
```

```{r}
sort(tab, decreasing = TRUE) # en yüksekten en düşüğe doğru sırala
```

- `table()` her bir benzersiz değer için oluşum sayısını verir, ardından `sort() azalan = TRUE argümanı ile oluşum sayısını en yüksekten en düşüğe doğru görüntüler. 
```{r}
sort(table(PISA_STU_2018$MISCED), decreasing = TRUE)

```

## Frekans tablosu oluşturma

- Herhangi bir ek işlem (yani veri işleme) yapmadan içe aktarılan veri setini kullanarak örneklemimizin demografik özellikleri hakkında bazı temel tanımlayıcı bilgileri hesaplayabilir ve çizebilirsiniz. Aşağıdaki kod, boru olarak da bilinen %>% operatörünü kullanır ve "ve sonra" olarak çevrilebilir. Örneğin, aşağıdaki kod şu şekilde okunabilir:

    - Veri kümesi PISA_STU_2018 ile başlayın ve ardından;
    
    - Değişken MISCED (anne eğitim) göre gruplayın ve ardından;
    
    - Her gruptaki gözlemlerin sayısını sayın ve ardından;
    
    - Gruplandırmayı kaldırın
```{r}
PISA_STU_2018 %>%
  group_by(MISCED) %>%
  count() %>%
  ungroup()
```

- `group_by()` fonkisyonu veri setinin yüzey düzeyinde değişikliklere neden olmaz, bunun yerine temel yapıyı değiştirir, böylece gruplar belirtilirse, daha sonra çağrılan fonkisyonlar gruplama değişkeninin her düzeyinde ayrı ayrı gerçekleştirilir. Bu gruplama oluşturulan nesnede kalır, bu nedenle nesne üzerinde gelecekte yapılacak işlemlerin gruplar tarafından bilinmeden gerçekleştirilmesini önlemek için `ungroup()` ile kaldırılması önemlidir.

- Bu nedenle yukarıdaki kod, dil değişkeninin her bir grubundaki gözlem sayısını sayar. Eğer sadece toplam gözlem sayısına ihtiyacınız varsa, group_by() ve ungroup() satırlarını kaldırabilirsiniz, böylece işlemi gruplar yerine tüm veri kümesi üzerinde gerçekleştirebilirsiniz:

- Benzer şekilde, örneklemin ortalama başarısını (ve SD'sini) hesaplamak isteyebiliriz ve bunu dplyr tidyverse paketindeki summarise() fonkisyonu kullanarak yapabiliriz.

```{r}
PISA_STU_2018 %>%
  summarise(ort = mean(PV1READ),
            sd = sd(PV1READ),
            n = n())
```

- Bu kod, yaş başarı ortalamasının hesaplanmasının sonucunu içeren ort adlı bir sütun biçiminde özet veriler üretir. Daha sonra aynı işlemi standart sapma için yapan sd sütununu oluşturur. Son olarak, istatistiği hesaplamak için kullanılan değerlerin sayısını n adlı bir sütuna eklemek için n() fonksiyonu kullanır - bu, özet istatistikler yaptığınızda yararlı bir akıl sağlığı kontrolüdür.

- Yukarıdaki kodun bu işlemin sonucunu kaydetmeyeceğini, sadece konsolda çıktısını vereceğini unutmayın. İleride kullanmak üzere kaydetmek isterseniz, <- notasyonunu kullanarak bir nesnede saklayabilir ve daha sonra nesne adını yazarak yazdırabilirsiniz.

- Son olarak, `group_by()` fonksiyonu özet istatistikleri hesaplarken aynı şekilde çalışacaktır - `group_by()` fonksiyonundan  sonra çağrılan işlevin çıktısı gruplama değişkeninin her düzeyi için üretilecektir.

## Bar Grafikleri
```{r}
dat <- PISA_STU_2018 %>%
  group_by(ST004D01T) %>%
  summarise(ort = mean(PV1READ),
            sd = sd(PV1READ),
            n = n()) %>%
  ungroup()

ggplot(data = PISA_STU_2018, mapping = aes(x = ST004D01T)) +
  geom_bar()
```
```{r}
dat <- mutate(PISA_STU_2018, Cinsiyet = factor(
  ST004D01T,
  c(1, 2),
  c("kiz", "erkek")
))

ggplot(data = dat, mapping = aes(x = Cinsiyet)) +
  geom_bar()
```

```{r}
ggplot(data = dat, mapping = aes(x = Cinsiyet)) + 
  geom_bar(aes(y = (..count..)/sum(..count..))) + 
  scale_y_continuous(name = "Yüzde", labels=scales::percent) 
```

## Görselleştirme


- Grafikler bir **veri kümesini anlamamıza yardımcı olur.**

- **Örüntüyü yorumlayabilmek** önemli bir güçtür.

- Veriyi betimlemek amacıyla

- Veriyi betimleyerek başkaları ile paylaşmak amacıyla veri görselleştirmeden yararlanırız.

- Veriyi Betimleme

    - Veri setini anlamaya yarar.
    
    - Olabildiğince ayrıntı içermesine 
    
    - Ne kadarına yorumlayabileceğinize odaklanın.






- teşekkürler !

--


- `r emo::ji('confused')`

- `r emo::ji('happy')`





