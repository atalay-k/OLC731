<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Veri duzenleme - IV | OLC731</title>
<meta name="author" content="Kubra Atalay Kabasakal">
<meta name="description" content="join() fonksiyonlari ile iki farklı veri seti birleştirilebilir. left_join() right_join() full_join() inner_join() semi_join() anti_join()  12.1 join()  join() fonksiyonları iki veri setini...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Chapter 12 Veri duzenleme - IV | OLC731">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/atalay-k/OLC731/veri-duzenleme---iv.html">
<meta property="og:image" content="https://github.com/atalay-k/OLC731/images/logos/logo.png">
<meta property="og:description" content="join() fonksiyonlari ile iki farklı veri seti birleştirilebilir. left_join() right_join() full_join() inner_join() semi_join() anti_join()  12.1 join()  join() fonksiyonları iki veri setini...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Veri duzenleme - IV | OLC731">
<meta name="twitter:description" content="join() fonksiyonlari ile iki farklı veri seti birleştirilebilir. left_join() right_join() full_join() inner_join() semi_join() anti_join()  12.1 join()  join() fonksiyonları iki veri setini...">
<meta name="twitter:image" content="https://github.com/atalay-k/OLC731/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.1/transition.js"></script><script src="libs/bs3compat-0.6.1/tabs.js"></script><script src="libs/bs3compat-0.6.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="R YAZILIMI ILE VERI ANALIZI">OLC731</a>:
        <small class="text-muted">R YAZILIMI ILE VERI ANALIZI</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Ders Hakkında</a></li>
<li><a class="" href="r-ve-rstudio-temeller.html"><span class="header-section-number">1</span> R ve Rstudio Temeller</a></li>
<li><a class="" href="r-paketler.html"><span class="header-section-number">2</span> R Paketler</a></li>
<li><a class="" href="fonksiyonlar.html"><span class="header-section-number">3</span> Fonksiyonlar</a></li>
<li><a class="" href="vekt%C3%B6rler.html"><span class="header-section-number">4</span> Vektörler</a></li>
<li><a class="" href="r-nesneler.html"><span class="header-section-number">5</span> R Nesneler</a></li>
<li><a class="" href="markdown.html"><span class="header-section-number">6</span> Markdown</a></li>
<li><a class="" href="veri-setleri.html"><span class="header-section-number">7</span> Veri Setleri</a></li>
<li><a class="" href="veri-okuma-ve-yazma.html"><span class="header-section-number">8</span> Veri Okuma ve Yazma</a></li>
<li><a class="" href="veri-duzenleme---i.html"><span class="header-section-number">9</span> Veri duzenleme - I</a></li>
<li><a class="" href="veri-duzenleme---ii.html"><span class="header-section-number">10</span> Veri duzenleme - II</a></li>
<li><a class="" href="veri-duzenleme---iii.html"><span class="header-section-number">11</span> Veri duzenleme - III</a></li>
<li><a class="active" href="veri-duzenleme---iv.html"><span class="header-section-number">12</span> Veri duzenleme - IV</a></li>
<li><a class="" href="veri-d%C3%BCzenleme-v.html"><span class="header-section-number">13</span> Veri Düzenleme V</a></li>
<li><a class="" href="betimleyici-istatistik.html"><span class="header-section-number">14</span> Betimleyici İstatistik</a></li>
<li><a class="" href="gorselle%C5%9Ftirme.html"><span class="header-section-number">15</span> Gorselleştirme</a></li>
<li><a class="" href="plotly.html"><span class="header-section-number">16</span> plotly</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="appendix-updating-r.html"><span class="header-section-number">B</span> Updating R, RStudio, and packages</a></li>
<li><a class="" href="conventions.html"><span class="header-section-number">C</span> Conventions</a></li>
<li><a class="" href="glossary-1.html"><span class="header-section-number">D</span> Glossary</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/atalay-k/OLC731">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="veri-duzenleme---iv" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Veri duzenleme - IV<a class="anchor" aria-label="anchor" href="#veri-duzenleme---iv"><i class="fas fa-link"></i></a>
</h1>
<ul>
<li>
<p><strong>join()</strong> fonksiyonlari ile iki farklı veri seti birleştirilebilir.</p>
<ul>
<li><strong>left_join()</strong></li>
<li><strong>right_join()</strong></li>
<li><strong>full_join()</strong></li>
<li><strong>inner_join()</strong></li>
<li><strong>semi_join()</strong></li>
<li><strong>anti_join()</strong></li>
</ul>
</li>
</ul>
<div id="join" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> join()<a class="anchor" aria-label="anchor" href="#join"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<strong>join()</strong> fonksiyonları iki veri setini istenilen şekilde birleştirme amacıyla kullanılırlar. Örneğin elimizde A ve B olmak üzere iki farklı veri seti olsun. Her iki veri setini birleştirmek istediğimizde bu veri setlerinden hangi <strong>satır</strong> veya <strong>sütunları</strong> seçeceğimizi, satırların <strong>eşleşip eşleşmeyeceğini</strong> hangi değişkenlerle belirleneceğinin bilinmesi gerekmektedir. Bu nedenle de her bir amaca yönelik <strong>join</strong> fonksiyon türleri belirlenmiştir. Bunlar; <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code> fonksiyonlarıdır.</li>
</ul>
</div>
<div id="left_join" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> left_join()<a class="anchor" aria-label="anchor" href="#left_join"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<code>A %&gt;% left_join(B)</code> ile A verisindeki tüm satırlar, mümkün olduğunda B verisi ile eşleştirilerek (olmadığında "NA" verir), hem A hem de B'den gelen sütunlar alınır.</li>
</ul>
<div class="float">
<img src="images/left_join.png" style="width:70.0%" alt="Şekil 1. left_join fonksiyonu"><div class="figcaption">Şekil 1. left_join fonksiyonu</div>
</div>
<p>Şekil 1'de, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> fonksiyonu ile öncelikle X1 değişkenine ait tüm gözlemler alınmıştır. X2 değişkenine ait ID numarası "1" olan gözlem olmadığı için yeni veri setinde bu kısım kayıp veri (NA) olarak girilmiştir. Burada birleştirme yapılacak iki veri setine ait ortak bir değişkenin ("ID") olması önemlidir.</p>
<p>Örnek bir veri seti üzerinden açıklayalım. miniPISA1, miniPISA verisinden öğrenci ıd, cinsiyet ve ST097Q01TA,ST097Q02TA değişkenlerinin ve bu veri setinin ilk altı satırının seçilmesi ile oluşturulur.</p>
<div class="sourceCode" id="cb461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span> <span class="co"># paketin aktifleştirilmesi</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"import/miniPISA.rda"</span><span class="op">)</span> <span class="co"># verinin yüklenmesi</span></span>
<span><span class="va">miniPISA1</span> <span class="op">&lt;-</span> <span class="va">miniPISA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">OGR_ID</span>,<span class="va">CNSYT</span>,<span class="va">ST097Q01TA</span>,<span class="va">ST097Q02TA</span><span class="op">)</span> <span class="co">#değişkenlerin seçimi</span></span>
<span><span class="va">miniPISA1</span><span class="op">&lt;-</span><span class="va">miniPISA1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,<span class="op">]</span> <span class="co">#veri setinin ilk 6 satırının seçilmesi</span></span>
<span><span class="va">miniPISA1</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">79201118</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
</tbody>
</table></div>
</div>
<p>miniPISA1 verisinin oluşturulmasından sonra miniPISA2 verisi oluşturulur. Öncelikle miniPISA verisinden öğrenci id, okumaktan zevk alma ve okuma olası değer1 puanları değişkenleri seçilir. Ardından bu veri setinin ilk yedi satırı seçilir ve üçüncü satır silinir. Sonuç olarak altı satırlık bir miniPISA2 veri seti elde edilmiş olur.</p>
<div class="sourceCode" id="cb462"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA2</span><span class="op">&lt;-</span> <span class="va">miniPISA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">OGR_ID</span>,<span class="va">O_ZEVK</span>,<span class="va">O_OD1</span><span class="op">)</span> <span class="co">#değişkenlerin seçimi</span></span>
<span><span class="va">miniPISA2</span><span class="op">&lt;-</span><span class="va">miniPISA2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>,<span class="op">]</span> <span class="co">#veri setinin ilk 7 satırının seçilmesi</span></span>
<span><span class="va">miniPISA2</span><span class="op">&lt;-</span><span class="va">miniPISA2</span><span class="op">[</span><span class="op">-</span><span class="fl">3</span>,<span class="op">]</span> <span class="co">#veri setinin 3. satırının çıkarılması</span></span>
<span><span class="va">miniPISA2</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left"></th>
<th align="right">OGR_ID</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">79200768</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">79201064</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="left">4</td>
<td align="right">79201275</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="right">79201481</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="odd">
<td align="left">6</td>
<td align="right">79201556</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="right">79201652</td>
<td align="right">-0.09</td>
<td align="right">410.65</td>
</tr>
</tbody>
</table></div>
</div>
<p>Elimizde bulunan miniPISA1 ve miniPISA2 veri setlerini kullanılarak <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> fonksiyonu ile birleştirme işlemi uygulanır.</p>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span> <span class="co">#veri birleştirme</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="right">79201118</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="odd">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="even">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
</tbody>
</table></div>
</div>
<p>Elde edilen çıktı incelendiğinde, miniPISA1 verisindeki tüm satırlar, miniPISA2 verisi ile eşleştirilmiş, "79201652" ıd numaralı öğrenci miniPISA1 de olmadığından hiç alınmamıştır. "79201118" ıd numaralı öğrenci ise miniPISA2 verisinde yer almadığında okumaktan zevk alma ve okuma olası değer1 değişkenleri "NA" olarak oluşturulmuştur.</p>
</div>
<div id="right_join" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> right_join()<a class="anchor" aria-label="anchor" href="#right_join"><i class="fas fa-link"></i></a>
</h2>
<p><code>A %&gt;%  left_join(B)</code> ile B verisindeki tüm satırlar, mümkün olduğunda A verisi ile eşleştirilerek (olmadığında "NA" verir), hem <code>A</code> hem de <code>B</code> den gelen sütunlar alınır.</p>
<div class="float">
<img src="images/right_join.png" style="width:70.0%" alt="Şekil 2. right_join fonksiyonu"><div class="figcaption">Şekil 2. right_join fonksiyonu</div>
</div>
<p>Şekil 2'de, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join()</a></code> fonksiyonu ile öncelikle X2 değişkenine ait tüm gözlemler alınmıştır. X1 değişkenine ait ID numarası "3" olan gözlem olmadığı için yeni veri setinde bu kısım kayıp veri(NA) olaraK girilmiştir. Burada da <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> fonksiyonunda olduğu gibi birleştirme yapılacak iki veri setine ait ortak bir değişkenin ("ID") olması önemlidir.</p>
<p>Örnek veri seti üzerinden açıklayalım:</p>
<div class="sourceCode" id="cb464"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span> <span class="co"># veri birleştirme</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="even">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="odd">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
<tr class="even">
<td align="right">79201652</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">-0.09</td>
<td align="right">410.65</td>
</tr>
</tbody>
</table></div>
</div>
<p>Elde edilen çıktı incelendiğinde, miniPISA2 verisindeki tüm satırlar, miniPISA1 verisi ile eşleştirilmiş, "79201118" ıd numaralı öğrenci miniPISA2 de olmadığından oluşturulan veri setine hiç alınmamıştır. "79201652" ıd numaralı öğrenci ise miniPISA1 verisinde yer almadığında cinsiyet, ST097Q01TA, ST097Q01TA değişkenleri "NA" olarak oluşturulmuştur. Görüldüğü üzere <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> ile <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join()</a></code> fonksiyonları arasındaki fark eşleştirme öncesi temel alınacak ana veri setinin farklı olmasıdır. Fakat pratikte genellikle <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code> fonksiyonu kullanılır.</p>
</div>
<div id="inner_joinb" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> inner_join(B)<a class="anchor" aria-label="anchor" href="#inner_joinb"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<code>A %&gt;% inner_join(B)</code> ile sadece <code>A</code> ve <code>B</code> nin eşleşen satırlarını birleştirir. Yani hem <code>A</code> hem de <code>B</code> den gelen sütunları alır.</li>
</ul>
<div class="float">
<img src="images/inner_join.png" style="width:70.0%" alt="Şekil 3. inner_join fonksiyonu"><div class="figcaption">Şekil 3. inner_join fonksiyonu</div>
</div>
<p>Şekil 3'te, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code> fonksiyonu ile öncelikle "ID" değişkeni baz alınarak ortak olan satırlar yani 2. satır birleştirilir.</p>
<div class="sourceCode" id="cb465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span> <span class="co"># veri birleştirme</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="even">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="odd">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
</tbody>
</table></div>
</div>
<p>"OGR_ID" değişkeni ortak değişken olduğundan bu değişkene göre birleştirme işlemi yapılmış ve sadece her iki veri setinde yer alan öğrenciler seçilmiştir. Bu durumda "79201118" ve "79201652" id numaraya sahip öğrenciler birleştirme işleminden sonra yeni veri setinde yer almamıştır. Böylece yeni veri seti dört satırdan oluşmuştur.</p>
</div>
<div id="full_join" class="section level2" number="12.5">
<h2>
<span class="header-section-number">12.5</span> full_join()<a class="anchor" aria-label="anchor" href="#full_join"><i class="fas fa-link"></i></a>
</h2>
<p><code>A %&gt;%  full_join(B)</code> ile A ve B veri setinde yer alan tüm satırları birleştirir. Hem A hem de B den gelen sütunları alır.</p>
<div class="float">
<img src="images/full_join.png" style="width:70.0%" alt="Şekil 4. full_join fonksiyonu"><div class="figcaption">Şekil 4. full_join fonksiyonu</div>
</div>
<p>Şekil 4'te, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join()</a></code> fonksiyonu ile öncelikle "ID" değişkeni baz alınarak iki veri setinde de yer alan tüm değişkenler birleştirilir.</p>
<div class="sourceCode" id="cb466"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span> <span class="co"># veri birleştirme</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="right">79201118</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="odd">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="even">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
<tr class="odd">
<td align="right">79201652</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">-0.09</td>
<td align="right">410.65</td>
</tr>
</tbody>
</table></div>
</div>
<p>"OGR_ID" değişkeni ortak değişken olduğundan bu değişkene göre birleştirme işlemi yapılmış ve her ikiveri setinde yer alan tüm öğrenciler seçilmiştir.Bu durumda "79201118" ve "79201652" id numaraya sahip öğrenciler birleştirme işleminden sonra yeni veri setinde yer almıştır. Böylece yeni veri seti yedi satırdan oluşmuştur.</p>
</div>
<div id="semi_join" class="section level2" number="12.6">
<h2>
<span class="header-section-number">12.6</span> semi_join()<a class="anchor" aria-label="anchor" href="#semi_join"><i class="fas fa-link"></i></a>
</h2>
<p><code>A %&gt;% semi_join(B)</code> ile A veri setinin B ile eşleşen satırları alınarak sadece A dan gelen sütunlar yeni veri setinde yer alır.</p>
<div class="float">
<img src="images/semi_join.png" style="width:70.0%" alt="Şekil 5. semi_join fonksiyonu"><div class="figcaption">Şekil 5. semi_join fonksiyonu</div>
</div>
<p>Şekil 5'te, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join()</a></code> fonksiyonu ile öncelikle "ID" değişkeni baz alınarak ortak olan satırlar yani 2. satır birleştirilir. Fakat yine sadece A veri setinde yer alan değişken ya da değişkenler alınır.</p>
<div class="sourceCode" id="cb467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
</tr>
</tbody>
</table></div>
</div>
<p>Çıktıda miniPISA1 verisinin miniPISA2 verisi ile eşleşen satırları ele alındığından "79201118" id numaralı öğrenci yeni veri setine dahil edilmemiştir. Ayrıca yeni veri setinde sadece miniPISA1 değişkeninde yer alan cinsiyet,ST097Q01TA,ST097Q02TA değişkenleri yer almıştır.</p>
<p><strong>A %&gt;% anti_join(B)</strong></p>
<p><code>A %&gt;% anti_join(B)</code> ile A nın B ile eşleşemeyen satırları alınarak yeni veri setinde sadece A dan gelen sütunlara yer verilir.</p>
<div class="float">
<img src="images/anti_join.png" style="width:70.0%" alt="Şekil 6. anti_join fonksiyonu"><div class="figcaption">Şekil 6. anti_join fonksiyonu</div>
</div>
<p>Şekil 6'da, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code> fonksiyonu ile öncelikle "ID" değişkeni baz alınarak ortak olmayan satırlar yani sadece 1. satır ve A veri setindeki değişken (X1) alınmıştır.</p>
<div class="sourceCode" id="cb468"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">miniPISA1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">miniPISA2</span><span class="op">)</span> <span class="co"># veri birleştirme</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">79201118</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr></tbody>
</table></div>
</div>
<p>Çıktıda miniPISA1 verisinin miniPISA2 verisi ile eşleşmeyen satırları ele alındığından "79201118" id numaralı öğrenci yeni veri setine dahil edilmiştir. Ayrıca yeni veri setinde sadece miniPISA1 değişkeninde yer alan cinsiyet, ST097Q01TA, ST097Q02TA değişkenleri yer almıştır.</p>
<p><strong>Not</strong>: Aynı değerleri içeren satırların olduğu sütunların eşleşmesi gerektiğini söyledik. Bunları birleştirme için aslında by = argümanını da kullanılır. Fakat birleştirme yapmak istediğimiz sütun/ların isimleri aynı olduğunda by = argümanını kullanmaya gerek kalmaz. Buraya kadar yapılan örnekler aşağıdaki gibi pipe operatörü kullanılmadan da yapılabilir.</p>
<div class="sourceCode" id="cb469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">miniPISA1</span>,<span class="va">miniPISA2</span>, by<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html">join_by</a></span><span class="op">(</span><span class="va">OGR_ID</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="right">OGR_ID</th>
<th align="right">CNSYT</th>
<th align="right">ST097Q01TA</th>
<th align="right">ST097Q02TA</th>
<th align="right">O_ZEVK</th>
<th align="right">O_OD1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">79200768</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-0.29</td>
<td align="right">376.02</td>
</tr>
<tr class="even">
<td align="right">79201064</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">0.60</td>
<td align="right">512.32</td>
</tr>
<tr class="odd">
<td align="right">79201118</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">79201275</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">-1.15</td>
<td align="right">393.01</td>
</tr>
<tr class="odd">
<td align="right">79201481</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.67</td>
<td align="right">552.46</td>
</tr>
<tr class="even">
<td align="right">79201556</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0.36</td>
<td align="right">441.29</td>
</tr>
</tbody>
</table></div>
</div>
<p>Elde edilen çıktı <code>miniPISA1 %&gt;% left_join(miniPISA2)</code> fonksiyonu ile elde edilen çıktı ile aynıdır.</p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><div class="chapter-nav">
<div class="prev"><a href="veri-duzenleme---iii.html"><span class="header-section-number">11</span> Veri duzenleme - III</a></div>
<div class="next"><a href="veri-d%C3%BCzenleme-v.html"><span class="header-section-number">13</span> Veri Düzenleme V</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#veri-duzenleme---iv"><span class="header-section-number">12</span> Veri duzenleme - IV</a></li>
<li><a class="nav-link" href="#join"><span class="header-section-number">12.1</span> join()</a></li>
<li><a class="nav-link" href="#left_join"><span class="header-section-number">12.2</span> left_join()</a></li>
<li><a class="nav-link" href="#right_join"><span class="header-section-number">12.3</span> right_join()</a></li>
<li><a class="nav-link" href="#inner_joinb"><span class="header-section-number">12.4</span> inner_join(B)</a></li>
<li><a class="nav-link" href="#full_join"><span class="header-section-number">12.5</span> full_join()</a></li>
<li><a class="nav-link" href="#semi_join"><span class="header-section-number">12.6</span> semi_join()</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/atalay-k/OLC731/blob/master/book/13-veri_duzenlemeIV.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/atalay-k/OLC731/edit/master/book/13-veri_duzenlemeIV.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>OLC731</strong>: R YAZILIMI ILE VERI ANALIZI" was written by Kubra Atalay Kabasakal. It was last built on 2023-12-12.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
